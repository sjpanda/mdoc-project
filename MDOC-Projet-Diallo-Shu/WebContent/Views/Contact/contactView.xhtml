<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets">

<f:metadata>
	<f:event listener="#{contactController.init}" type="preRenderView" />
</f:metadata>

<h:body>

	<ui:composition template="../../templates/commonLayout.xhtml">
		<ui:define name="title">
			<h:outputText value="Create contact"
				rendered="#{contactController.action eq 'create'}" />
			<h:outputText value="Update contact"
				rendered="#{contactController.action eq 'update'}" />
			<h:outputText value="Search contacts"
				rendered="#{contactController.action eq 'search'}" />
		</ui:define>

		<ui:define name="content">
			<f:view>
				<f:loadBundle basename="properties.messagesContact" var="msg" />
				<h:panelGroup rendered="#{contactController.action eq 'update'}">
					<ul class="pager">
						<li class="previous"><h:outputLink
								value="listContactView.xhtml">
								<h:outputText value="&larr; Back contact list" />
								<f:param name="action" value="update" />
							</h:outputLink></li>
					</ul>
				</h:panelGroup>
				<h:form styleClass="form-horizontal">
					<div class="control-group">
						<h:outputLabel value="#{msg.sn}" styleClass="control-label" />
						<div class="controls">
							<h:inputText value="#{contactController.numSiret}">
								<f:validateRegex pattern="[0-9]*" />
								<f:param name="type" value="number" />
							</h:inputText>
						</div>
					</div>
					<div class="control-group">
						<h:outputLabel value="#{msg.firstName}" styleClass="control-label" />
						<div class="controls">
							<h:inputText id="firstname"
								value="#{contactController.contact.firstname}" />
						</div>
					</div>
					<div class="control-group">
						<h:outputLabel value="#{msg.lastName}" styleClass="control-label" />
						<div class="controls">
							<h:inputText value="#{contactController.contact.lastname}" />
						</div>
					</div>
					<div class="control-group">
						<h:outputLabel value="#{msg.email}" styleClass="control-label" />
						<div class="controls">
							<h:inputText value="#{contactController.contact.email}">
								<f:validateRegex
									pattern="[\w\.-]*[a-zA-Z0-9_]@[\w\.-]*[a-zA-Z0-9]\.[a-zA-Z][a-zA-Z\.]*[a-zA-Z]" />
							</h:inputText>
						</div>
					</div>
					<div class="control-group">
						<h:outputLabel value="#{msg.street}" styleClass="control-label" />
						<div class="controls">
							<h:inputText value="#{contactController.contact.address.street}" />
						</div>
					</div>
					<div class="control-group">
						<h:outputLabel value="#{msg.zipCode}" styleClass="control-label" />
						<div class="controls">
							<h:inputText value="#{contactController.contact.address.zip}" />
						</div>
					</div>
					<div class="control-group">
						<h:outputLabel value="#{msg.city}" styleClass="control-label" />
						<div class="controls">
							<h:inputText value="#{contactController.contact.address.city}" />
						</div>
					</div>
					<div class="control-group">
						<h:outputLabel value="#{msg.country}" styleClass="control-label" />
						<div class="controls">
							<h:inputText value="#{contactController.contact.address.country}" />
						</div>
					</div>
					<div class="control-group">
						<h:outputLabel value="#{msg.phoneHome}" styleClass="control-label" />
						<div class="controls">
							<h:inputText value="#{contactController.homePhone}" />
						</div>
					</div>
					<div class="control-group">
						<h:outputLabel value="#{msg.phoneOffice}"
							styleClass="control-label" />
						<div class="controls">
							<h:inputText value="#{contactController.officePhone}" />
						</div>
					</div>
					<div class="control-group">
						<h:outputLabel value="#{msg.phoneMobile}"
							styleClass="control-label" />
						<div class="controls">
							<h:inputText value="#{contactController.mobilePhone}" />
						</div>
					</div>
					<div class="control-group">
						<div class="controls">
							<button type="reset" class="btn">Reset</button>
							<h:commandButton action="#{contactController.save}"
								value="#{msg.save}" styleClass="btn btn-success"
								rendered="#{contactController.action eq 'create'}"
								style="margin-left: 20px;" />
							<h:commandButton action="#{contactController.save}"
								value="#{msg.update}" styleClass="btn btn-success"
								rendered="#{contactController.action eq 'update'}"
								style="margin-left: 20px;" />
							<h:commandButton action="#{contactController.search}"
								value="#{msg.search}" styleClass="btn btn-success"
								rendered="#{contactController.action eq 'search'}"
								style="margin-left: 20px;" />
						</div>
					</div>
					<h:messages layout="table"></h:messages>
				</h:form>
			</f:view>
		</ui:define>

	</ui:composition>

</h:body>

</html>